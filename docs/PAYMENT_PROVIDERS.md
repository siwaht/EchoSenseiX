# Payment Providers Guide

EchoSenseiX supports 23+ payment providers across different categories, giving you flexibility to accept payments from customers worldwide.

## Supported Payment Providers

### Traditional Payment Gateways

#### Stripe
- **Regions**: Worldwide
- **Currencies**: USD, EUR, GBP, CAD, AUD, JPY, CHF, SEK, NOK, DKK
- **Fees**: 2.9% + $0.30
- **Features**: Full-featured payment platform with subscriptions, marketplace splits, fraud detection
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://stripe.com/docs/api

#### PayPal
- **Regions**: Worldwide
- **Currencies**: USD, EUR, GBP, CAD, AUD, JPY
- **Fees**: 2.9% + $0.30
- **Features**: Trusted platform with 400M+ users, subscriptions, refunds
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://developer.paypal.com/docs/api/overview/

#### Square
- **Regions**: US, CA, UK, AU, JP, IE, ES, FR
- **Currencies**: USD, CAD, GBP, AUD, JPY, EUR
- **Fees**: 2.9% + $0.30
- **Features**: All-in-one solution with POS integration
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://developer.squareup.com/docs

#### Authorize.Net
- **Regions**: US, CA, UK, EU
- **Currencies**: USD, CAD, GBP, EUR
- **Fees**: 2.9% + $0.30
- **Features**: Established gateway with 25+ years of experience
- **Status**: Production Ready âœ…
- **Popularity**: Medium
- **Documentation**: https://developer.authorize.net/api/reference/

#### Braintree
- **Regions**: Worldwide
- **Currencies**: USD, EUR, GBP, AUD, CAD
- **Fees**: 2.9% + $0.30
- **Features**: PayPal's full-stack platform with marketplace splits
- **Status**: Production Ready âœ…
- **Popularity**: Medium
- **Documentation**: https://developers.braintreepayments.com/

#### Adyen
- **Regions**: Worldwide
- **Currencies**: USD, EUR, GBP, AUD, CAD, JPY, CHF
- **Fees**: 2.5% + $0.10
- **Features**: Enterprise payment platform with POS integration
- **Status**: Production Ready âœ…
- **Popularity**: Medium
- **Documentation**: https://docs.adyen.com/

---

### Regional Payment Providers

#### Razorpay (India)
- **Regions**: India, Malaysia, Singapore
- **Currencies**: INR, MYR, SGD
- **Fees**: 2.0%
- **Features**: 100+ payment methods in India
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://razorpay.com/docs/api/

#### Paytm (India)
- **Regions**: India
- **Currencies**: INR
- **Fees**: 1.99%
- **Features**: Leading digital payment platform in India
- **Status**: Production Ready âœ…
- **Popularity**: Medium
- **Documentation**: https://developer.paytm.com/docs/

#### Flutterwave (Africa)
- **Regions**: Nigeria, Ghana, Kenya, Uganda, South Africa, Tanzania
- **Currencies**: NGN, GHS, KES, UGX, ZAR, TZS, USD, EUR, GBP
- **Fees**: 1.4%
- **Features**: Leading payment technology across Africa
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://developer.flutterwave.com/docs

#### Mercado Pago (Latin America)
- **Regions**: Argentina, Brazil, Chile, Colombia, Mexico, Peru, Uruguay
- **Currencies**: ARS, BRL, CLP, COP, MXN, PEN, UYU
- **Fees**: 3.99%
- **Features**: Leading payment solution in Latin America
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://www.mercadopago.com/developers

---

### Digital Wallets

#### Apple Pay
- **Regions**: Worldwide
- **Currencies**: USD, EUR, GBP, CAD, AUD, JPY
- **Fees**: No additional fees (uses underlying payment processor)
- **Features**: Secure payments using Apple devices
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://developer.apple.com/apple-pay/

#### Google Pay
- **Regions**: Worldwide
- **Currencies**: USD, EUR, GBP, CAD, AUD, JPY
- **Fees**: No additional fees
- **Features**: Fast checkout with Google
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://developers.google.com/pay/api

#### Amazon Pay
- **Regions**: US, UK, DE, FR, IT, ES, JP
- **Currencies**: USD, EUR, GBP, JPY
- **Fees**: 2.9% + $0.30
- **Features**: Pay with Amazon account credentials
- **Status**: Production Ready âœ…
- **Popularity**: Medium
- **Documentation**: https://developer.amazon.com/pay

#### Venmo (US)
- **Regions**: United States
- **Currencies**: USD
- **Fees**: 1.9% + $0.10
- **Features**: Social payment app
- **Status**: Beta
- **Popularity**: Medium
- **Documentation**: https://developer.venmo.com/

#### Cash App Pay (US/UK)
- **Regions**: US, UK
- **Currencies**: USD, GBP
- **Fees**: 2.75%
- **Features**: Accept payments through Cash App
- **Status**: Beta
- **Popularity**: Medium
- **Documentation**: https://developers.cash.app/

---

### Buy Now Pay Later (BNPL)

#### Klarna
- **Regions**: US, UK, DE, SE, NO, FI, DK, NL, AT, CH
- **Currencies**: USD, EUR, GBP, SEK, NOK, DKK, CHF
- **Fees**: 3.29% + $0.30
- **Features**: Flexible payment options
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://docs.klarna.com/

#### Afterpay
- **Regions**: US, UK, AU, NZ, CA
- **Currencies**: USD, GBP, AUD, NZD, CAD
- **Fees**: 4.0% + $0.30
- **Features**: Pay in 4 interest-free installments
- **Status**: Production Ready âœ…
- **Popularity**: High ðŸ”¥
- **Documentation**: https://developers.afterpay.com/

#### Affirm
- **Regions**: US, CA
- **Currencies**: USD, CAD
- **Fees**: 2.9% + $0.30
- **Features**: Transparent financing for online purchases
- **Status**: Production Ready âœ…
- **Popularity**: Medium
- **Documentation**: https://docs.affirm.com/

#### Sezzle
- **Regions**: US, CA
- **Currencies**: USD, CAD
- **Fees**: 6.0%
- **Features**: Interest-free installment payments
- **Status**: Production Ready âœ…
- **Popularity**: Low
- **Documentation**: https://docs.sezzle.com/

---

### Cryptocurrency

#### Coinbase Commerce
- **Regions**: Worldwide
- **Currencies**: BTC, ETH, LTC, USDC, DAI, BCH
- **Fees**: 1.0%
- **Features**: Accept cryptocurrency payments with ease
- **Status**: Production Ready âœ…
- **Popularity**: Medium
- **Documentation**: https://commerce.coinbase.com/docs/

#### BitPay
- **Regions**: Worldwide
- **Currencies**: BTC, BCH, ETH, USDC, GUSD, PAX, BUSD
- **Fees**: 1.0%
- **Features**: Bitcoin and cryptocurrency payment processor
- **Status**: Production Ready âœ…
- **Popularity**: Medium
- **Documentation**: https://bitpay.com/docs

#### Crypto.com Pay
- **Regions**: Worldwide
- **Currencies**: BTC, ETH, CRO, USDC, USDT
- **Fees**: 0%
- **Features**: Accept crypto payments with instant settlement
- **Status**: Production Ready âœ…
- **Popularity**: Low
- **Documentation**: https://pay-docs.crypto.com/

---

## Configuration Guide

### Step 1: Choose Your Providers

Consider the following factors when selecting payment providers:

1. **Geographic Coverage**: Where are your customers located?
   - US customers: Stripe, PayPal, Square, Authorize.Net, Affirm, Klarna
   - India: Razorpay, Paytm
   - Africa: Flutterwave
   - Latin America: Mercado Pago
   - Europe: Stripe, PayPal, Klarna, Adyen

2. **Payment Methods**: What payment methods do your customers prefer?
   - Credit/Debit Cards: Most traditional gateways
   - Digital Wallets: Apple Pay, Google Pay, Amazon Pay
   - Buy Now Pay Later: Klarna, Afterpay, Affirm
   - Cryptocurrency: Coinbase Commerce, BitPay, Crypto.com Pay

3. **Business Type**:
   - E-commerce: Stripe, PayPal, Square
   - Marketplace: Stripe, Braintree, Adyen (support marketplace splits)
   - Subscription Business: Stripe, PayPal, Razorpay, Braintree
   - High-Volume Enterprise: Adyen, Braintree

### Step 2: Obtain API Credentials

Each provider requires different credentials:

**Stripe**:
- Secret Key (sk_live_... or sk_test_...)
- Publishable Key (pk_live_... or pk_test_...)
- Webhook Secret (optional)

**PayPal**:
- Client ID
- Client Secret
- Webhook ID (optional)

**Square**:
- Access Token
- Application ID
- Location ID
- Webhook Signature Key (optional)

**Razorpay**:
- Key ID
- Key Secret
- Webhook Secret (optional)

(See individual provider documentation for complete credential requirements)

### Step 3: Configure in EchoSenseiX

1. Navigate to **Agency Settings > Payment Providers**
2. Click on the provider you want to configure
3. Enter your API credentials
4. Select test/sandbox mode for testing
5. Click **Save Configuration**
6. The system will validate your credentials automatically

### Step 4: Set Default Provider

1. Go to **Agency Settings > Payment Configuration**
2. Select your default payment gateway
3. Configure currency and tax rate settings
4. Save changes

### Step 5: Test Your Integration

1. Use sandbox/test mode credentials
2. Create a test subscription or payment
3. Verify webhooks are working
4. Check payment appears in your provider dashboard
5. Test refunds and cancellations

### Step 6: Go Live

1. Replace test credentials with live credentials
2. Switch from sandbox to production mode
3. Test with small real transactions
4. Monitor webhook events
5. Set up alerts for failed payments

---

## Multi-Provider Strategy

### Recommended Combinations

**Global E-commerce**:
- Primary: Stripe
- Secondary: PayPal
- BNPL: Klarna or Afterpay
- Wallets: Apple Pay, Google Pay

**India-Focused**:
- Primary: Razorpay
- Secondary: Paytm
- Global fallback: Stripe or PayPal

**Africa-Focused**:
- Primary: Flutterwave
- Global fallback: Stripe or PayPal

**Latin America-Focused**:
- Primary: Mercado Pago
- Global fallback: Stripe or PayPal

**Enterprise/High-Volume**:
- Primary: Adyen or Braintree
- Fallback: Stripe

### Benefits of Multiple Providers

1. **Higher Conversion**: Customers can use their preferred payment method
2. **Regional Optimization**: Lower fees in specific regions
3. **Redundancy**: Fallback if one provider is down
4. **Risk Management**: Diversify payment processing
5. **Customer Choice**: Better user experience

---

## Webhook Configuration

All providers support webhooks for real-time payment notifications. Configure webhooks in your provider dashboard:

**Webhook URL Format**:
```
https://your-domain.com/api/webhooks/{provider}
```

**Supported Providers**:
- `/api/webhooks/stripe`
- `/api/webhooks/paypal`
- `/api/webhooks/square`
- `/api/webhooks/razorpay`
- And more...

**Important Events**:
- Payment succeeded
- Payment failed
- Subscription created
- Subscription updated
- Subscription canceled
- Refund issued

---

## Security Best Practices

1. **API Keys**: Never expose secret keys in client-side code
2. **Webhook Verification**: Always verify webhook signatures
3. **Environment Variables**: Store credentials in environment variables
4. **Encryption**: All credentials are encrypted at rest using AES-256-GCM
5. **Test Mode**: Use test/sandbox mode for development
6. **Rotate Keys**: Regularly rotate API keys
7. **Monitor**: Set up alerts for suspicious activity
8. **PCI Compliance**: EchoSenseiX doesn't handle raw card data - all processing is done by payment providers

---

## Troubleshooting

### Common Issues

**Provider Validation Failed**:
- Verify API credentials are correct
- Check you're using the right environment (test vs production)
- Ensure your provider account is fully activated
- Check API key permissions

**Webhooks Not Receiving**:
- Verify webhook URL is publicly accessible
- Check webhook signature verification
- Review provider webhook logs
- Ensure your firewall allows provider IPs

**Payment Fails**:
- Check customer has sufficient funds
- Verify currency is supported
- Review provider transaction logs
- Check for fraud detection blocks

**Refund Issues**:
- Ensure original payment was successful
- Check refund is within allowed timeframe
- Verify you have sufficient balance (for some providers)

---

## Support

For provider-specific issues, consult their documentation:

- [Stripe Support](https://support.stripe.com/)
- [PayPal Support](https://www.paypal.com/support)
- [Square Support](https://squareup.com/help)
- [Razorpay Support](https://razorpay.com/support/)

For EchoSenseiX integration issues, contact your system administrator or refer to our main documentation.
