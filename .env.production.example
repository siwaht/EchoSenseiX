# Production Environment Configuration
# High Concurrency & Scaling Setup

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=production
HOST=0.0.0.0
PORT=5000
PUBLIC_URL=https://your-domain.com
TRUST_PROXY=true

# ============================================
# CLUSTERING (Multi-Core Support)
# ============================================
CLUSTER_ENABLED=true
CLUSTER_WORKERS=auto                 # auto = CPU cores, or specify number
CLUSTER_RESTART_DELAY=1000
CLUSTER_MAX_RESTARTS=10
CLUSTER_SHUTDOWN_TIMEOUT=30000

# ============================================
# DATABASE (Choose One)
# ============================================

# PostgreSQL (Recommended for high concurrency)
DATABASE_PROVIDER=postgresql
DATABASE_URL=postgresql://user:pass@db-host:5432/echosenseix
DATABASE_SSL=true
DATABASE_MAX_CONNECTIONS=100         # High concurrency setting
DATABASE_MIN_CONNECTIONS=20

# OR MongoDB
# DATABASE_PROVIDER=mongodb
# DATABASE_URL=mongodb+srv://user:pass@cluster.mongodb.net/echosenseix

# OR MySQL
# DATABASE_PROVIDER=mysql
# DATABASE_URL=mysql://user:pass@db-host:3306/echosenseix

# OR Supabase
# DATABASE_PROVIDER=supabase
# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=your-key

# ============================================
# REDIS (Distributed Cache & Sessions)
# ============================================
CACHE_PROVIDER=redis
REDIS_HOST=redis-cluster.internal
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
CACHE_TTL=3600
CACHE_MAX_SIZE=10000

# Session storage
SESSION_STORE=redis
SESSION_TTL=86400

# ============================================
# JOB QUEUE (Async Processing)
# ============================================
QUEUE_PROVIDER=redis                 # or: bull
QUEUE_CONCURRENCY=10
QUEUE_MAX_RETRIES=3

# ============================================
# VOICE PROVIDER
# ============================================
VOICE_PROVIDER=elevenlabs            # or: openai, google, azure
ELEVENLABS_API_KEY=your_elevenlabs_key

# OR OpenAI TTS
# VOICE_PROVIDER=openai
# OPENAI_API_KEY=your_openai_key

# OR Google Cloud TTS
# VOICE_PROVIDER=google
# GOOGLE_CLOUD_PROJECT=your-project
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json

# ============================================
# PAYMENT PROVIDER
# ============================================
PAYMENT_PROVIDER=stripe              # or: paypal, square
STRIPE_SECRET_KEY=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...

# ============================================
# LLM PROVIDER
# ============================================
LLM_PROVIDER=openai                  # or: anthropic, mistral
OPENAI_API_KEY=sk-...
LLM_MODEL=gpt-4

# ============================================
# EMAIL PROVIDER
# ============================================
EMAIL_PROVIDER=sendgrid              # or: mailgun, smtp
SENDGRID_API_KEY=SG....

# OR Mailgun
# EMAIL_PROVIDER=mailgun
# MAILGUN_API_KEY=key-...

# ============================================
# STORAGE PROVIDER
# ============================================
STORAGE_PROVIDER=s3                  # or: local, gcs, azure

# AWS S3
S3_BUCKET=your-bucket
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=AKIA...
S3_SECRET_ACCESS_KEY=...

# OR Google Cloud Storage
# STORAGE_PROVIDER=gcs
# GCS_BUCKET=your-bucket
# GCS_PROJECT_ID=your-project
# GCS_KEY_FILE_PATH=/path/to/credentials.json

# OR Azure Blob Storage
# STORAGE_PROVIDER=azure
# AZURE_STORAGE_ACCOUNT_NAME=account
# AZURE_STORAGE_ACCOUNT_KEY=key
# AZURE_STORAGE_CONTAINER_NAME=container

# ============================================
# SECURITY
# ============================================
SESSION_SECRET=your-super-secret-session-key-min-32-chars
ENCRYPTION_KEY=your-super-secret-encryption-key-min-32-chars

# ============================================
# MONITORING & HEALTH CHECKS
# ============================================
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info                       # debug, info, warn, error
LOG_FORMAT=json                      # json or text
